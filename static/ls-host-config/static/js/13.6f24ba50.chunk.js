(window["webpackJsonpls-host-config"]=window["webpackJsonpls-host-config"]||[]).push([[13],{121:function(e,a,t){"use strict";var r=t(128),c=t.n(r).a.create({baseURL:"/api/",timeout:1e4,headers:{"ls-token":"1234567890abcdef"}});a.a=c},299:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));var r=t(23),c=t(139),n=t(62),l=t(52),o=t(0),m=t.n(o),s=t(138),i=t(292),d=t(71),u=t(293),h=t(179),g=t(127),_=t.n(g),f=t(121);function p(){var e=Object(o.useState)(!1),a=Object(l.a)(e,2),t=a[0],g=a[1],p=Object(o.useState)(!1),E=Object(l.a)(p,2),b=E[0],v=E[1],N=Object(o.useState)(!1),C=Object(l.a)(N,2),O=C[0],y=C[1],w=Object(o.useState)(""),k=Object(l.a)(w,2),j=k[0],F=k[1],x=Object(o.useState)(0),I=Object(l.a)(x,2),D=I[0],G=I[1],A=Object(o.useState)(""),T=Object(l.a)(A,2),L=T[0],S=T[1],B=Object(o.useState)(""),R=Object(l.a)(B,2),H=R[0],J=R[1],M=Object(o.useState)(!0),z=Object(l.a)(M,2),U=z[0],Y=z[1],q=function(){return g(!1)},K=function(){f.a.get("v1/electric-configs/channels").then((function(e){var a=e.data;a.is_succeed&&Z(a.data.channels)})).catch((function(e){console.log(e)}))},P=function(e){Y(!1),J(e),v(!0)},Q=function(e){if(""!==e){var a={ch_name:e,ch_temp_read_address:0,ch_leakcurrent_read_address:0,ch_current_read_address:0,current_allowed_range_max:20,current_info_trigger_range:"10-20",current_info_trigger_duration:30,current_alarm_trigger_range:">20",current_alarm_trigger_duration:30,temp_info_trigger_range:"32-40",temp_info_trigger_duration:30,temp_alarm_trigger_range:">40",temp_alarm_trigger_duration:30,leakcurrent_info_trigger_range:"32-40",leakcurrent_info_trigger_duration:30,leakcurrent_alarm_trigger_range:">40",leakcurrent_alarm_trigger_duration:30};console.log("Trying to add new channel: ",a),f.a.post("v1/electric-configs/channels",a).then((function(e){var t,r=e.data;r.is_succeed?(t="\u6dfb\u52a0\u901a\u9053 '".concat(a.ch_name,"' \u6210\u529f\uff01"),Y(!0),J(t),v(!0),K()):P("\u6dfb\u52a0\u901a\u9053 '".concat(a.ch_name,"' \u5931\u8d25: ")+r.message)})).catch((function(e){P("\u6dfb\u52a0\u901a\u9053 '".concat(a.ch_name,"' \u5931\u8d25: ")+e.message)}))}else P("\u6dfb\u52a0\u901a\u9053\u5931\u8d25\uff0c\u901a\u9053\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01")},V=Object(o.useState)([]),W=Object(l.a)(V,2),X=W[0],Z=W[1],$=Object(o.useState)([!1,!1,!1,!1,!1]),ee=Object(l.a)($,2),ae=ee[0],te=ee[1],re=function(e,a,t){var l=[].concat(Object(n.a)(X.slice(0,a)),[Object(c.a)(Object(c.a)({},X[a]),{},Object(r.a)({},t,e.target.value))],Object(n.a)(X.slice(a+1)));Z(l)},ce=function(e,a,t){var l=[].concat(Object(n.a)(X.slice(0,a)),[Object(c.a)(Object(c.a)({},X[a]),{},Object(r.a)({},t,parseInt(e.target.value)))],Object(n.a)(X.slice(a+1)));Z(l)};return Object(o.useEffect)((function(){_.a.init(),K()}),[]),m.a.createElement(m.a.Fragment,null,m.a.createElement(i.a,{show:b,variant:U?"success":"danger",onClose:function(){return v(!1)},dismissible:!0},m.a.createElement(i.a.Heading,null,U?"\u64cd\u4f5c\u6210\u529f":"\u64cd\u4f5c\u5931\u8d25"),m.a.createElement("p",null,H)),m.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},m.a.createElement(h.a,{onClose:function(){return y(!1)},style:{position:"fixed",zIndex:3,width:"80%"},show:O,delay:1e4,autohide:!0},m.a.createElement(h.a.Header,null,m.a.createElement("strong",{className:"mr-auto"},"\u7535\u7bb1\u914d\u7f6e"),m.a.createElement("small",null,"1 mins ago")),m.a.createElement(h.a.Body,null,j))),m.a.createElement("div",null,m.a.createElement("div",{className:"page-header"},m.a.createElement("h3",{className:"page-title"},"\u7535\u7bb1\u914d\u7f6e")),m.a.createElement("form",{className:"form-inline"},m.a.createElement("label",{className:"sr-only",htmlFor:"inlineFormChannelName"},"Name"),m.a.createElement(s.a.Control,{type:"text",className:"form-control mb-2 mr-sm-2",id:"inlineFormChannelName",value:L,onChange:function(e){S(e.target.value)},placeholder:"\u901a\u9053\u540d\u79f0"}),m.a.createElement("button",{type:"button",className:"btn btn-gradient-primary mb-2",onClick:function(){Q(L)}},"\u6dfb\u52a0\u65b0\u901a\u9053")),m.a.createElement("div",{className:"row mt-5",style:{height:"465px",overflowY:"scroll"}},X.length>0?X.map((function(e,a){return m.a.createElement("div",{className:"col-md-6 grid-margin stretch-card",key:"ch-".concat(e.id)},m.a.createElement("div",{className:"card"},m.a.createElement("div",{className:"card-body"},m.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},onClick:function(){console.log("To remove channel: ",e.ch_name),G(a),g(!0)}},m.a.createElement("h4",{className:"card-title"},m.a.createElement("i",{className:"mdi mdi-flash-auto"}),"\u901a\u9053".concat(a)),m.a.createElement("i",{className:"mdi mdi-delete icon-sm text-primary align-middle"})),m.a.createElement("form",{className:"forms-sample"},m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chId".concat(e.id),className:"col-sm-3 col-form-label"},"ID"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"text",className:"form-control",id:"chId-".concat(e.id),placeholder:"",value:e.id,readOnly:!0}))),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"currentRangeMax".concat(e.id),className:"col-sm-3 col-form-label"},"\u91cf\u7a0b"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{as:"select",id:"currentRangeMax".concat(e.id),className:"mt-2",onChange:function(e){return ce(e,a,"current_allowed_range_max")}},["10","15","20","25"].map((function(a){return m.a.createElement("option",{key:a,value:a,selected:parseInt(a)===e.current_allowed_range_max},a)}))))),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chName".concat(e.id),className:"col-sm-3 col-form-label"},"\u901a\u9053\u540d"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"text",className:"form-control",id:"chName".concat(e.id),placeholder:"",value:e.ch_name,onChange:function(e){re(e,a,"ch_name")}}))),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("button",{type:"button",className:"btn btn-inverse-danger btn-icon",onClick:function(){var e=Object(n.a)(ae);e[a]=!e[a],te(e)}},m.a.createElement("i",{className:ae[a]?"mdi mdi-chevron-double-up":"mdi mdi-chevron-double-down"}))),ae[a]?m.a.createElement(m.a.Fragment,null,m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chTempReadAddress".concat(e.id),className:"col-sm-3 col-form-label"},"\u6e29\u5ea6\u8bfb\u53d6\u5730\u5740"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"text",className:"form-control",id:"chTempReadAddress".concat(e.id),placeholder:"",value:e.ch_temp_read_address,onChange:function(e){re(e,a,"ch_temp_read_address")}}))),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chLeakCurrentReadAddress".concat(e.id),className:"col-sm-3 col-form-label"},"\u6f0f\u7535\u6d41\u8bfb\u53d6\u5730\u5740"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"text",className:"form-control",id:"chLeakCurrentReadAddress".concat(e.id),placeholder:"",value:e.ch_leakcurrent_read_address,onChange:function(e){re(e,a,"ch_leakcurrent_read_address")}}))),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chCurrentReadAddress".concat(e.id),className:"col-sm-3 col-form-label"},"\u7535\u6d41\u8bfb\u53d6\u5730\u5740"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"text",className:"form-control",id:"chCurrentReadAddress".concat(e.id),placeholder:"",value:e.ch_current_read_address,onChange:function(e){re(e,a,"ch_current_read_address")}}))),m.a.createElement("div",{className:"mt-1 mb-1",style:{width:"100%",height:"1px",backgroundColor:"#78BDF5"}}),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverTempInfo".concat(e.id),className:"col-sm-3 col-form-label"},"\u8fc7\u70ed\u89e6\u53d1\uff08\u63d0\u793a\uff09"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"text",className:"form-control",id:"chOverTempInfo".concat(e.id),placeholder:"",value:e.temp_info_trigger_range,onChange:function(e){re(e,a,"temp_info_trigger_range")}}))),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverTempInfoDuration".concat(e.id),className:"col-sm-3 col-form-label"},"\u89e6\u53d1\u65f6\u95f4\uff08\u79d2\uff09"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"number",className:"form-control",id:"chOverTempInfoDuration".concat(e.id),placeholder:"250",value:e.temp_info_trigger_duration,onChange:function(e){ce(e,a,"temp_info_trigger_duration")}}))),m.a.createElement("div",{className:"mt-1 mb-1",style:{width:"100%",height:"1px",backgroundColor:"#78BDF5"}}),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverTempAlarm".concat(e.id),className:"col-sm-3 col-form-label"},"\u8fc7\u70ed\u89e6\u53d1(\u544a\u8b66)"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"text",className:"form-control",id:"chOverTempAlarm".concat(e.id),placeholder:"",value:e.temp_alarm_trigger_range,onChange:function(e){re(e,a,"temp_alarm_trigger_range")}}))),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverTempAlarmDuration".concat(e.id),className:"col-sm-3 col-form-label"},"\u89e6\u53d1\u65f6\u95f4(\u79d2)"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"number",className:"form-control",id:"chOverTempAlarmDuration".concat(e.id),placeholder:"250",value:e.temp_alarm_trigger_duration,onChange:function(e){ce(e,a,"temp_alarm_trigger_duration")}}))),m.a.createElement("div",{className:"mt-1 mb-1",style:{width:"100%",height:"1px",backgroundColor:"#78BDF5"}}),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverCurrentInfo".concat(e.id),className:"col-sm-3 col-form-label"},"\u8fc7\u6d41\u89e6\u53d1\uff08\u63d0\u793a\uff09"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"text",className:"form-control",id:"chOverCurrentInfo".concat(e.id),placeholder:"",value:e.current_info_trigger_range,onChange:function(e){re(e,a,"current_info_trigger_range")}}))),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverCurrentInfoDuration".concat(e.id),className:"col-sm-3 col-form-label"},"\u89e6\u53d1\u65f6\u95f4\uff08\u79d2\uff09"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"number",className:"form-control",id:"chOverCurrentInfoDuration".concat(e.id),placeholder:"250",value:e.current_info_trigger_duration,onChange:function(e){ce(e,a,"current_info_trigger_duration")}}))),m.a.createElement("div",{className:"mt-1 mb-1",style:{width:"100%",height:"1px",backgroundColor:"#78BDF5"}}),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverCurrentAlarm".concat(e.id),className:"col-sm-3 col-form-label"},"\u8fc7\u6d41\u89e6\u53d1\uff08\u544a\u8b66\uff09"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"text",className:"form-control",id:"chOverCurrentAlarm".concat(e.id),placeholder:"",value:e.current_alarm_trigger_range,onChange:function(e){re(e,a,"current_alarm_trigger_range")}}))),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverCurrentAlarmDuration".concat(e.id),className:"col-sm-3 col-form-label"},"\u89e6\u53d1\u65f6\u95f4\uff08\u79d2\uff09"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"number",className:"form-control",id:"chOverCurrentAlarmDuration".concat(e.id),placeholder:"250",value:e.current_alarm_trigger_duration,onChange:function(e){ce(e,a,"current_alarm_trigger_duration")}}))),m.a.createElement("div",{className:"mt-1 mb-1",style:{width:"100%",height:"1px",backgroundColor:"#78BDF5"}}),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverLeakCurrentInfo".concat(e.id),className:"col-sm-3 col-form-label"},"\u6f0f\u7535\u6d41\uff08\u63d0\u793a\uff09"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"text",className:"form-control",id:"chOverLeakCurrentInfo".concat(e.id),placeholder:"250",value:e.leakcurrent_info_trigger_range,onChange:function(e){re(e,a,"leakcurrent_info_trigger_range")}}))),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverLeakCurrentInfoDuration".concat(e.id),className:"col-sm-3 col-form-label"},"\u89e6\u53d1\u65f6\u95f4\uff08\u79d2\uff09"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"number",className:"form-control",id:"chOverLeakCurrentInfoDuration".concat(e.id),placeholder:"250",value:e.leakcurrent_info_trigger_duration,onChange:function(e){ce(e,a,"leakcurrent_info_trigger_duration")}}))),m.a.createElement("div",{className:"mt-1 mb-1",style:{width:"100%",height:"1px",backgroundColor:"#78BDF5"}}),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverLeakCurrentAlarm".concat(e.id),className:"col-sm-3 col-form-label"},"\u6f0f\u7535\u6d41\uff08\u544a\u8b66\uff09"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"text",className:"form-control",id:"chOverLeakCurrentAlarm".concat(e.id),placeholder:"250",value:e.leakcurrent_alarm_trigger_range,onChange:function(e){re(e,a,"leakcurrent_alarm_trigger_range")}}))),m.a.createElement(s.a.Group,{className:"row"},m.a.createElement("label",{htmlFor:"chOverLeakCurrentAlarmDuration".concat(e.id),className:"col-sm-3 col-form-label"},"\u89e6\u53d1\u65f6\u95f4\uff08\u79d2\uff09"),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(s.a.Control,{type:"number",className:"form-control",id:"chOverLeakCurrentAlarmDuration".concat(e.id),placeholder:"250",value:e.leakcurrent_alarm_trigger_duration,onChange:function(e){ce(e,a,"leakcurrent_alarm_trigger_duration")}})))):null,m.a.createElement("button",{type:"button",className:"btn btn-gradient-primary mr-2",onClick:function(){!function(e){var a=X[e];console.log("Trying to update channel: ",a),f.a.put("v1/electric-configs/channels/".concat(a.id),a).then((function(e){e.data.is_succeed?(K(),F("\u66f4\u65b0\u901a\u9053 '".concat(a.ch_name,"' \u6210\u529f\uff01")),y(!0)):(F("\u66f4\u65b0\u901a\u9053 '".concat(a.ch_name,"' \u5931\u8d25\uff01")),y(!0))})).catch((function(e){F("\u66f4\u65b0\u901a\u9053 '".concat(a.ch_name,"' \u5931\u8d25\uff01")),y(!0)}))}(a)}},"\u786e\u5b9a")))))})):"\u6ca1\u6709\u901a\u9053\u53ef\u663e\u793a\uff01")),m.a.createElement(u.a,{show:t,onHide:q},m.a.createElement(u.a.Header,{closeButton:!0},m.a.createElement(u.a.Title,null,"\u8b66\u544a")),m.a.createElement(u.a.Body,null,X.length>0&&D>=0&&D<X.length?"\u5373\u5c06\u5220\u9664\u901a\u9053\uff1a".concat(X[D].ch_name,"\uff0c\u662f\u5426\u7ee7\u7eed"):""),m.a.createElement(u.a.Footer,null,m.a.createElement(d.a,{variant:"secondary",onClick:q},"\u53d6\u6d88"),m.a.createElement(d.a,{variant:"primary",onClick:function(){var e;e=D,q(),f.a.delete("v1/electric-configs/channels/".concat(X[e].id)).then((function(a){var t=a.data;t.is_succeed?(F("\u5220\u9664\u901a\u9053 '".concat(X[e].ch_name,"' \u6210\u529f\uff01")),y(!0),K()):(console.log("\u5220\u9664\u901a\u9053 '".concat(X[e].ch_name,"' \u5931\u8d25: ")+t.message),F("\u5220\u9664\u901a\u9053 '".concat(X[e].ch_name,"' \u5931\u8d25\uff01")),y(!0))})).catch((function(a){console.log("\u5220\u9664\u901a\u9053 '".concat(X[e].ch_name,"' \u5931\u8d25: ")+a.message),F("\u5220\u9664\u901a\u9053 '".concat(X[e].ch_name,"' \u5931\u8d25\uff01")),y(!0)}))}},"\u786e\u5b9a"))))}}}]);
//# sourceMappingURL=13.6f24ba50.chunk.js.map